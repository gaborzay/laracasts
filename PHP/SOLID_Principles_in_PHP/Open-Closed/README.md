Separate extensible behavior behind an interface, and flip the dependencies.